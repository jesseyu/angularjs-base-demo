"use strict";var app=angular.module("webApp",["ui.router","ngCookies","w5c.validator","ui.bootstrap","ui.grid","ui.grid.pinning","monospaced.qrcode"]);app.constant("API_ENDPOINT",{host:"http://192.168.1.24",port:9999}),app.config(["$stateProvider","$urlRouterProvider","w5cValidatorProvider",function(e,t,a){a.config({blurTrig:!0,showError:!0,removeError:!0}),a.setRules({email:{required:"输入的邮箱地址不能为空",email:"输入邮箱地址格式不正确"},username:{required:"输入的用户名不能为空",pattern:"用户名必须输入字母、数字、下划线,以字母开头",w5cuniquecheck:"输入用户名已经存在，请重新输入"},password:{required:"密码不能为空",minlength:"密码长度不能小于{minlength}",maxlength:"密码长度不能大于{maxlength}"},repeatPassword:{required:"重复密码不能为空",repeat:"两次密码输入不一致"},number:{required:"数字不能为空"},customizer:{customizer:"自定义验证数字必须大于上面的数字"},dynamicName:{required:"动态Name不能为空"},dynamic:{required:"动态元素不能为空"}}),t.otherwise("/index"),e.state("index",{url:"/index",templateUrl:"views/home.html",controller:["$scope","$location",function(e,t){e.say="Hello angularjs"}]}).state("httpService",{url:"/httpService",templateUrl:"views/httpService.html",controller:["HttpService","$scope","$location",function(e,t,a){t.pullDataFun=function(){e.get("/data/test.json").then(function(e){t.pullData=e.data,console.log(e.data)})}}]}).state("table",{url:"/table",templateUrl:"views/table.html",controller:"tableCtrl"}).state("form",{url:"/form",templateUrl:"views/form.html",controller:"form"}).state("echarts",{url:"/echarts",templateUrl:"views/echarts.html",controller:"echarts"}).state("rentInfo",{url:"/rentInfo",templateUrl:"views/rentInfo.html",controller:"rentInfoCtrl"}).state("rentIndex",{url:"/rentIndex",templateUrl:"views/rentIndex.html",controller:"rentIndexCtrl"}).state("rentOrder",{url:"/rentOrder",templateUrl:"views/rentOrder.html",controller:"rentOrderCtrl"}).state("select",{url:"/select",templateUrl:"views/select.html",controller:"selectCtrl"}).state("model",{url:"/model",templateUrl:"views/model.html"})}]),app.controller("echarts",["$scope",function(e){var t=e.vm={};t.groupData=["测试栏目1","测试栏目2","测试栏目3","测试栏目4","测试栏目5","测试栏目6"],t.chart=0,t.show=!0,t.myCharts={"柱状图":0,"饼图":1},t.showChange=function(e){t.show=0==e},console.log(t)}]),app.controller("form",["$scope",function(e){var t=e.vm={showErrorType:"1",entity:{}};t.saveEntity=function(e){alert("Save Successfully!!!")},t.errorCallback=function(e,t){},t.customizer=function(){return t.entity.customizer>t.entity.number},t.types=[{value:1,text:"选择框"},{value:2,text:"输入框"}],t.processForm=function(){console.log(t.entity)}}]),app.controller("modelCtrl",["$scope","$uibModal",function(e,t){(e.vm={}).openModel=function(a){t.open({templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",backdrop:"static",size:a,resolve:{items1:function(){return e.items}}})}}]),app.controller("ModalInstanceCtrl",["$scope","$uibModalInstance",function(e,t){e.ok=function(){console.log("舒服哦")},e.cancel=function(){t.dismiss("cancel")}}]),app.controller("rentIndexCtrl",["$scope","HttpService","$interval",function(e,t,a){var n={Page:1,roWs:10};e.pullRentdata=function(){t.get("/data/rentlist.json",n).then(function(t){e.rentList=t.data,e.rentdata=t.data.orderList})},e.pullSellData=function(){t.get("/data/selllist.json",n).then(function(t){e.sellList=t.data,e.sellData=t.data.orderList})},t.get("/data/typeDataList.json").then(function(t){e.typelist=t.data}),e.pullRentdata(),e.pullSellData()}]),app.controller("rentInfoCtrl",["$scope","HttpService",function(e,t){e.currentPage=1,e.itemsperpage=5,e.maxSize=5;var a={page:1,rows:10};e.queryList=function(a){t.get("/data/rentinfo.json",a).then(function(t){e.rentInfoList=t.data.data,e.totalItems=t.data.total})},e.pageChanged=function(){a.page=e.currentPage,e.queryList(a)},e.queryList(a)}]),app.controller("rentOrderCtrl",["$scope","HttpService","$http","$timeout",function(e,t,a,n){e.states=[{productName:"联想电脑",unit:"元/张",day:30},{productName:"hp电脑",unit:"元/张",day:10},{productName:"asus电脑",unit:"元/张",day:50},{productName:"abs刹车",unit:"元/张",day:50},{productName:"ibm",unit:"元/张",day:12},{productName:"bmw宝马",unit:"元/量",day:12},{productName:"保时捷",unit:"元/量",day:12}],e.productlist=[],e.onSelect=function(t,a,n,r,s){e.productlist[s].productName=t.productName,e.productlist[s].unit=t.unit,e.productlist[s].day=t.day,e.productlist[s].proNameShowing=!1},e.changeCount=function(t,a){n(function(){e.productlist[a].countShowing=!1},2e3)};var r=e.vm={orderBaseInfo:{},order:{totalPrices:"12",actualPayment:"12",productlist:e.productlist,discount:0,cashpLedge:0}};e.addProduct=function(){e.productlist.push({productName:e.productName,unit:e.unit,day:e.day,count:e.count,proNameShowing:!0,countShowing:!0})},e.totalPrice=function(){var t=0,a=e.days();return angular.forEach(e.productlist,function(e){void 0!=e.count&&(t+=e.day*e.count*a)}),t},e.days=function(){var e;if(void 0==r.orderBaseInfo.zpStartTime||void 0==r.orderBaseInfo.zpEndTime)e=0;else{var t=new Date(r.orderBaseInfo.zpStartTime),a=new Date(r.orderBaseInfo.zpEndTime),n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),s=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();e=parseInt(Math.abs(new Date(n)-new Date(s))/1e3/60/60/24)}return e},e.del=function(t){e.productlist.splice(t,1),console.log(e.productlist)},e.print=function(){$("#print").printArea()},e.save=function(){alert(r),console.info(r)},t.get("/data/rentOrderJson.json").then(function(t){e.rentOrder=t.data})}]),app.controller("selectCtrl",["$scope","HttpService",function(e,t){var a=e.vm={};t.get("/data/country.json").then(function(e){console.log(e),a.countries=e.data}),e.$watch("vm.country",function(e){a.province=null}),e.$watch("vm.province",function(e){a.city=null})}]),app.controller("tableCtrl",["$scope","$http",function(e,t){e.gridOptions={},e.gridOptions.columnDefs=[{name:"id",width:50,enablePinning:!1},{name:"name",width:100,pinnedLeft:!0},{name:"age",width:100,pinnedRight:!0},{name:"address.street",width:150},{name:"address.city",width:150},{name:"address.state",width:50},{name:"address.zip",width:50},{name:"company",width:100},{name:"email",width:100},{name:"phone",width:200},{name:"about",width:300},{name:"friends[0].name",displayName:"1st friend",width:150},{name:"friends[1].name",displayName:"2nd friend",width:150},{name:"friends[2].name",displayName:"3rd friend",width:150}];var a=[{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"},{id:1,name:"yuhao",age:20,"address.street":"avbcc","address.city":"addd","address.state":"343","address.zip":"123",company:"123",email:"45646",phone:"234234",about:"23423442323sadasf","friends[0].name":"123123","friends[1].name":"ertyert","friends[2].name":"234234"}];e.gridOptions.data=a}]),app.directive("barCharts",function(){return{restrict:"AE",scope:{source:"="},template:"<div>柱状图</div>",controller:["$scope",function(e){}],link:function(e,t,a){console.log(e.source);var n=t.find("div")[0];t.context;n.style.width="400px",n.style.height="400px";var r=echarts.init(n),s={title:{text:"工作空间使用情况"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},gird:{left:"5%",right:"5%",bottom:"5%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:e.source},series:[{name:"已使用",type:"bar",stack:"存储空间",label:{normal:{show:!0,position:"insideRight"}},barwidth:"80%",data:[100,200,300,260,50,120]},{name:"剩余",type:"bar",stack:"存储空间",label:{normal:{show:!0,position:"insideRight"}},barwidth:"80%",data:[200,100,2,80,200,180]}]};r.setOption(s),r.resize()}}}),app.directive("pieCharts",function(){return{restrict:"AE",scope:{source:"="},template:"<div>这是饼图</div>",controller:["$scope",function(e){}],link:function(e,t,a){var n=t.find("div")[0];t.context;n.style.width="300px",n.style.height="300px";var r=echarts.init(n),s={backgroudColor:"#F2F2F2",title:{text:"某一个栏目",x:"center",y:"bottom"},tooltip:{trigger:"item",formatter:"{a}<br/>{b} {c}({d}%)"},series:[{name:"空间使用",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:50,name:"已使用"},{value:450,name:"未使用"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(s),r.resize()}}}),app.filter("fiterRentType",["$sce",function(e){return function(e){return"0"==e?"已延期":"1"==e?"即将到期":"2"==e?"正常使用":"3"==e?"已到期":void 0}}]),app.directive("slideFollow",["$timeout","$interval",function(e,t){return{restrict:"E",replace:!0,scope:{datasetdata:"=",howtoload:"&"},templateUrl:"slidefollow.html",link:function(a,n,r){var s;e(function(){function e(){parseInt(o.css("margin-top"))>-i*c?(r++,o.animate({marginTop:-c*r+"px"},"slow")):(r=0,a.howtoload(),o.css("margin-top","0px"))}var r=0,o=$("."+$(n).parent()[0].className),d=o.children("li"),i=d.length,c=d.height();o.html(o.html()+o.html()),s=t(e,2e3),o.hover(function(){t.cancel(s)},function(){t.cancel(s),s=t(e,2e3)})},1e3),n.parent().on("$destroy",function(){t.cancel(s)})}}}]),app.service("cache",["$cookies",function(e){this.put=function(t,a){e.put(t,a)},this.get=function(t){return e.get(t)},this.remove=function(t){e.remove(t)}}]),app.factory("HttpService",["$window","$http","API_ENDPOINT","$q","$log",function(e,t,a,n,r){var s=a,o=s.host+":"+s.port;return{endpoint:o,post:function(e,a){e=o+e;var r,s=n.defer();return r=t({method:"post",url:e,transformRequest:function(){return a?$.param(a):""},headers:{"Content-Type":"application/x-www-form-urlencoded"}}),r.then(function(e,t,a,n){s.resolve(e)},function(e,t,a,n){}),s.promise},get:function(e,a){e=o+e;var r=n.defer();return t({method:"GET",url:e,params:a}).then(function(e,t,a,n){r.resolve(e)},function(e,t,a,n){console.log("请求失败...")}),r.promise}}}]);